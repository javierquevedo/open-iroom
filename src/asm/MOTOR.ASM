org	1580h
MOTOR_INIT:
	CLR	MOTOR1_STATUSI
	CLR	MOTOR2_STATUSI
	CLR	MOTOR1_STATUSD
	CLR	MOTOR2_STATUSD
	LCALL	EJECUTAR_IM1P
	LCALL	EJECUTAR_IM2P
	RET

DELAY_PIC:
	PUSH	ACC
	MOV	A,#255
	DJNZ	ACC,$
	POP	ACC
	RET

EJECUTAR_IM1I:
	CLR 	MEN	
	CLR	M1	
	CLR	M2
	CLR	M3	
	CLR	D1	
	CLR	D2
	NOP
	NOP
		
	SETB	MEN
	CLR	MEN
	LCALL	DELAY_PIC
	SETB	MOTOR1_STATUSI
	CLR	MOTOR1_STATUSD
RET

	;MOTOR 1 = DERECHA
EJECUTAR_IM1D:
	CLR 	MEN	
	CLR	M1	
	CLR	M2
	CLR	M3	
	SETB	D1	
	CLR	D2
	NOP
	NOP	
	SETB	MEN
	CLR	MEN
	LCALL	DELAY_PIC
	SETB	MOTOR1_STATUSD
	CLR	MOTOR1_STATUSI
RET
	;MOTOR 1 = PARADO
EJECUTAR_IM1P:
	CLR 	MEN	
	CLR	M1	
	CLR	M2
	CLR	M3	
	CLR	D1	
	SETB	D2
	NOP
	NOP	
	SETB	MEN
	CLR	MEN
	LCALL	DELAY_PIC
	CLR	MOTOR1_STATUSI
	CLR	MOTOR1_STATUSD
RET
	;MOTOR 2 = IZQUIERDA
EJECUTAR_IM2I:
	CLR 	MEN	
	SETB	M1	
	CLR	M2
	CLR	M3	
	CLR	D1	
	CLR	D2	
	SETB	MEN
	CLR	MEN
	LCALL	DELAY_PIC
	SETB	MOTOR2_STATUSI
	CLR	MOTOR2_STATUSD
RET

	;MOTOR 2 = DERECHA
EJECUTAR_IM2D:
	CLR 	MEN	
	SETB	M1	
	CLR	M2
	CLR	M3	
	SETB	D1	
	CLR	D2	
	SETB	MEN
	CLR	MEN
	LCALL	DELAY_PIC
	SETB	MOTOR2_STATUSD
	CLR	MOTOR2_STATUSI
RET
	;MOTOR 2 = PARADO
EJECUTAR_IM2P:
	CLR 	MEN	
	SETB	M1	
	CLR	M2
	CLR	M3	
	CLR	D1	
	SETB	D2	
	SETB	MEN
	CLR	MEN
	LCALL	DELAY_PIC
	CLR	MOTOR2_STATUSI
	CLR	MOTOR2_STATUSD
RET
